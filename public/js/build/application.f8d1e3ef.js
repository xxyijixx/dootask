import{m as c}from"./vuex.cc7cb26e.js";import{D}from"./index.115789cf.js";import{n as p,U as L,e as u}from"./app.e519792d.js";import{C as S,T as w,R as x}from"./CheckinExport.934c45f6.js";import{I as C}from"./IFrame.4ffacfcd.js";import A from"./checkin.cccf43c1.js";import"./@micro-zoe.c2e1472d.js";import"./jquery.8a59c426.js";import"./@babel.f9bcab46.js";import"./dayjs.20005b68.js";import"./localforage.7d350792.js";import"./markdown-it.bda97caf.js";import"./mdurl.ce6c1dd8.js";import"./uc.micro.8d343c98.js";import"./entities.48a44fec.js";import"./linkify-it.c5e8196e.js";import"./punycode.js.4b3f125a.js";import"./highlight.js.ab8aeea4.js";import"./markdown-it-link-attributes.e1d5d151.js";import"./@traptitech.897ae552.js";import"./vue.fd9b772e.js";import"./openpgp_hi.15f91b1d.js";import"./axios.6ec123f8.js";import"./mitt.1ea0a2a3.js";import"./vue-router.2d566cd7.js";import"./vue-clipboard2.50be9c5e.js";import"./clipboard.058ef547.js";import"./view-design-hi.0cb8d723.js";import"./vuedraggable.9fd6afed.js";import"./sortablejs.d74243d9.js";import"./vue-resize-observer.c3c9ca4e.js";import"./element-sea.7f208f9b.js";import"./deepmerge.cecf392e.js";import"./resize-observer-polyfill.0bdc1850.js";import"./throttle-debounce.7c3948b2.js";import"./babel-helper-vue-jsx-merge-props.5ed215c3.js";import"./normalize-wheel.2a034b9f.js";import"./async-validator.49abba38.js";import"./babel-runtime.4773988a.js";import"./core-js.314b4a1d.js";import"./tip.60a50ce9.js";import"./ImgUpload.21a7477e.js";import"./ReportEdit.1520331b.js";import"./ReportDetail.ec20243e.js";const k=t=>t.split(`
`).filter(a=>a.trim()).map(a=>{const[e,o]=a.split("|").map(r=>r.trim());return{value:e,label:o||e}},[]).filter(a=>a.value),I=[{value:"openai",label:"ChatGPT",tags:[],src:$A.mainUrl("images/avatar/default_openai.png"),desc:$A.L("\u6211\u662F\u4E00\u4E2A\u4EBA\u5DE5\u667A\u80FD\u52A9\u624B\uFF0C\u4E3A\u7528\u6237\u63D0\u4F9B\u95EE\u9898\u89E3\u7B54\u548C\u6307\u5BFC\u3002\u6211\u6CA1\u6709\u5177\u4F53\u7684\u8EAB\u4EFD\uFF0C\u53EA\u662F\u4E00\u4E2A\u7A0B\u5E8F\u3002\u60A8\u6709\u4EC0\u4E48\u95EE\u9898\u53EF\u4EE5\u95EE\u6211\u54E6\uFF1F")},{value:"claude",label:"Claude",tags:[],src:$A.mainUrl("images/avatar/default_claude.png"),desc:$A.L("\u6211\u662FClaude,\u4E00\u4E2A\u7531Anthropic\u516C\u53F8\u521B\u9020\u51FA\u6765\u7684AI\u52A9\u624B\u673A\u5668\u4EBA\u3002\u6211\u7684\u5DE5\u4F5C\u662F\u5E2E\u52A9\u4EBA\u7C7B,\u4E0E\u4EBA\u5BF9\u8BDD\u5E76\u7ED9\u51FA\u89E3\u7B54\u3002")},{value:"deepseek",label:"DeepSeek",tags:[],src:$A.mainUrl("images/avatar/default_deepseek.png"),desc:$A.L("DeepSeek\u5927\u8BED\u8A00\u6A21\u578B\u7B97\u6CD5\u662F\u5317\u4EAC\u6DF1\u5EA6\u6C42\u7D22\u4EBA\u5DE5\u667A\u80FD\u57FA\u7840\u6280\u672F\u7814\u7A76\u6709\u9650\u516C\u53F8\u63A8\u51FA\u7684\u6DF1\u5EA6\u5408\u6210\u670D\u52A1\u7B97\u6CD5\u3002")},{value:"gemini",label:"Gemini",tags:[],src:$A.mainUrl("images/avatar/default_gemini.png"),desc:`${$A.L("\u6211\u662F\u7531Google\u5F00\u53D1\u7684\u751F\u6210\u5F0F\u4EBA\u5DE5\u667A\u80FD\u804A\u5929\u673A\u5668\u4EBA\u3002")}${$A.L("\u5B83\u57FA\u4E8E\u540C\u540D\u7684Gemini\u7CFB\u5217\u5927\u578B\u8BED\u8A00\u6A21\u578B\u3002")}${$A.L("\u662F\u5E94\u5BF9OpenAI\u516C\u53F8\u5F00\u53D1\u7684ChatGPT\u804A\u5929\u673A\u5668\u4EBA\u7684\u5D1B\u8D77\u800C\u5F00\u53D1\u7684\u3002")}`},{value:"grok",label:"Grok",tags:[],src:$A.mainUrl("images/avatar/default_grok.png"),desc:$A.L("Grok\u662F\u7531xAI\u5F00\u53D1\u7684\u751F\u6210\u5F0F\u4EBA\u5DE5\u667A\u80FD\u804A\u5929\u673A\u5668\u4EBA\uFF0C\u65E8\u5728\u901A\u8FC7\u5B9E\u65F6\u56DE\u7B54\u7528\u6237\u95EE\u9898\u6765\u63D0\u4F9B\u5E2E\u52A9\u3002")},{value:"ollama",label:"Ollama",tags:[],src:$A.mainUrl("images/avatar/default_ollama.png"),desc:$A.L("Ollama \u662F\u4E00\u4E2A\u8F7B\u91CF\u7EA7\u3001\u53EF\u6269\u5C55\u7684\u6846\u67B6\uFF0C\u65E8\u5728\u8BA9\u7528\u6237\u80FD\u591F\u5728\u672C\u5730\u673A\u5668\u4E0A\u6784\u5EFA\u548C\u8FD0\u884C\u5927\u578B\u8BED\u8A00\u6A21\u578B\u3002")},{value:"zhipu",label:"\u667A\u8C31\u6E05\u8A00",tags:[],src:$A.mainUrl("images/avatar/default_zhipu.png"),desc:`${$A.L("\u6211\u662F\u667A\u8C31\u6E05\u8A00\uFF0C\u662F\u667A\u8C31 AI \u516C\u53F8\u4E8E2023\u8BAD\u7EC3\u7684\u8BED\u8A00\u6A21\u578B\u3002")}${$A.L("\u6211\u7684\u4EFB\u52A1\u662F\u9488\u5BF9\u7528\u6237\u7684\u95EE\u9898\u548C\u8981\u6C42\u63D0\u4F9B\u9002\u5F53\u7684\u7B54\u590D\u548C\u652F\u6301\u3002")}`},{value:"qianwen",label:"\u901A\u4E49\u5343\u95EE",tags:[],src:$A.mainUrl("avatar/%E9%80%9A%E4%B9%89%E5%8D%83%E9%97%AE.png"),desc:$A.L("\u6211\u662F\u8FBE\u6469\u9662\u81EA\u4E3B\u7814\u53D1\u7684\u8D85\u5927\u89C4\u6A21\u8BED\u8A00\u6A21\u578B\uFF0C\u80FD\u591F\u56DE\u7B54\u95EE\u9898\u3001\u521B\u4F5C\u6587\u5B57\uFF0C\u8FD8\u80FD\u8868\u8FBE\u89C2\u70B9\u3001\u64B0\u5199\u4EE3\u7801\u3002")},{value:"wenxin",label:"\u6587\u5FC3\u4E00\u8A00",tags:[],src:$A.mainUrl("avatar/%E6%96%87%E5%BF%83.png"),desc:$A.L("\u6211\u662F\u6587\u5FC3\u4E00\u8A00\uFF0C\u82F1\u6587\u540D\u662FERNIE Bot\u3002\u6211\u80FD\u591F\u4E0E\u4EBA\u5BF9\u8BDD\u4E92\u52A8\uFF0C\u56DE\u7B54\u95EE\u9898\uFF0C\u534F\u52A9\u521B\u4F5C\uFF0C\u9AD8\u6548\u4FBF\u6377\u5730\u5E2E\u52A9\u4EBA\u4EEC\u83B7\u53D6\u4FE1\u606F\u3001\u77E5\u8BC6\u548C\u7075\u611F\u3002")}],F={fields:[{label:"API Key",prop:"key",type:"password"},{label:"\u6A21\u578B\u5217\u8868",prop:"models",type:"textarea",placeholder:"\u4E00\u884C\u4E00\u4E2A\u6A21\u578B\u540D\u79F0",functions:"\u4F7F\u7528\u9ED8\u8BA4\u6A21\u578B\u5217\u8868"},{label:"\u9ED8\u8BA4\u6A21\u578B",prop:"model",type:"model",placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u6A21\u578B",tip:"\u53EF\u9009\u6570\u636E\u6765\u81EA\u6A21\u578B\u5217\u8868"},{label:"Base URL",prop:"base_url",placeholder:"Enter base URL...",tip:"API\u8BF7\u6C42\u7684\u57FA\u7840URL\u8DEF\u5F84\uFF0C\u5982\u679C\u6CA1\u6709\u8BF7\u7559\u7A7A"},{label:"\u4F7F\u7528\u4EE3\u7406",prop:"agency",placeholder:"\u652F\u6301 http \u6216 socks \u4EE3\u7406",tip:"\u4F8B\u5982\uFF1Ahttp://proxy.com \u6216 socks5://proxy.com"},{label:"Temperature",prop:"temperature",placeholder:"\u6A21\u578B\u6E29\u5EA6\uFF0C\u4F4E\u5219\u4FDD\u5B88\uFF0C\u9AD8\u5219\u591A\u6837",tip:"\u4F8B\u5982\uFF1A0.7\uFF0C\u8303\u56F4\uFF1A0-1\uFF0C\u9ED8\u8BA4\uFF1A0.7"},{label:"\u9ED8\u8BA4\u63D0\u793A\u8BCD",prop:"system",type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u63D0\u793A\u8BCD",tip:"\u4F8B\u5982\uFF1A\u4F60\u662F\u4E00\u4E2A\u4EBA\u5F00\u53D1\u7684AI\u52A9\u624B"}],aiList:{openai:{extraFields:[{prop:"key",placeholder:"OpenAI API Key",link:"https://platform.openai.com/account/api-keys"},{prop:"models",link:"https://platform.openai.com/docs/models"}]},claude:{extraFields:[{prop:"key",placeholder:"Claude API Key",link:"https://docs.anthropic.com/en/api/getting-started"},{prop:"models",link:"https://docs.anthropic.com/en/docs/about-claude/models"}]},deepseek:{extraFields:[{prop:"key",placeholder:"DeepSeek API Key",link:"https://platform.deepseek.com/api_keys"},{prop:"models",link:"https://api-docs.deepseek.com/zh-cn/quick_start/pricing"}]},gemini:{extraFields:[{prop:"key",placeholder:"Gemini API Key",link:"https://makersuite.google.com/app/apikey"},{prop:"models",link:"https://ai.google.dev/models/gemini"},{prop:"agency",placeholder:"\u4EC5\u652F\u6301 http \u4EE3\u7406",tip:"\u4F8B\u5982\uFF1Ahttp://proxy.com"}]},grok:{extraFields:[{prop:"key",placeholder:"Grok API Key",link:"https://docs.x.ai/docs/tutorial"},{prop:"models",link:"https://docs.x.ai/docs/models"}]},ollama:{extraFields:[{prop:"key",placeholder:"Ollama API Key",tip:"\u5982\u679C\u6CA1\u6709\u8BF7\u7559\u7A7A"},{prop:"models",link:"https://ollama.com/models",functions:"\u83B7\u53D6\u672C\u5730\u6A21\u578B\u5217\u8868"},{prop:"base_url",placeholder:"Enter base URL...",tip:"API\u8BF7\u6C42\u7684URL\u8DEF\u5F84",sort:1}]},zhipu:{extraFields:[{prop:"key",placeholder:"Zhipu API Key",link:"https://bigmodel.cn/usercenter/apikeys"},{prop:"models",link:"https://open.bigmodel.cn/dev/api"}]},qianwen:{extraFields:[{prop:"key",placeholder:"Qianwen API Key",link:"https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key"},{prop:"models",link:"https://help.aliyun.com/zh/model-studio/getting-started/models"}]},wenxin:{extraFields:[{prop:"key",placeholder:"Wenxin API Key",link:"https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application/v1"},{prop:"secret",placeholder:"Wenxin Secret Key",link:"https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application/v1",type:"password",label:"Secret Key",after:"key"},{prop:"models",link:"https://cloud.baidu.com/doc/WENXINWORKSHOP/s/Blfmc9dlf"}]}}};var R=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setting-component-item"},[a("Form",t._b({ref:"formData",attrs:{model:t.formData,rules:t.ruleData},nativeOn:{submit:function(e){e.preventDefault()}}},"Form",t.formOptions,!1),[t._l(t.fields,function(e){return[a("FormItem",{attrs:{label:t.$L(e.label),prop:e.prop}},[e.type==="password"?[a("Input",{attrs:{maxlength:255,type:"password",placeholder:t.$L(e.placeholder)},model:{value:t.formData[e.prop],callback:function(o){t.$set(t.formData,e.prop,o)},expression:"formData[field.prop]"}})]:e.type==="model"?[a("Select",{attrs:{transfer:""},model:{value:t.formData[e.prop],callback:function(o){t.$set(t.formData,e.prop,o)},expression:"formData[field.prop]"}},t._l(t.modelOption(e.prop),function(o){return a("Option",{key:o.value,attrs:{value:o.value}},[t._v(t._s(o.label))])}),1)]:e.type==="textarea"?[a("Input",{attrs:{maxlength:500,type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:t.$L(e.placeholder)},model:{value:t.formData[e.prop],callback:function(o){t.$set(t.formData,e.prop,o)},expression:"formData[field.prop]"}})]:[a("Input",{attrs:{maxlength:500,placeholder:t.$L(e.placeholder)},model:{value:t.formData[e.prop],callback:function(o){t.$set(t.formData,e.prop,o)},expression:"formData[field.prop]"}})],e.link||e.tip?a("div",{staticClass:"form-tip"},[e.link?[t._v(" "+t._s(t.$L(e.tipPrefix||"\u83B7\u53D6\u65B9\u5F0F"))+" "),a("a",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.link))])]:e.tip?[t._v(" "+t._s(t.$L(e.tip))+" ")]:t._e()],2):t._e(),e.functions?a("div",{staticClass:"form-tip",staticStyle:{"margin-top":"-5px"}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(o){return t.functionClick(e.prop)}}},[t._v(t._s(t.$L(e.functions)))])]):t._e()],2)]})],2),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("\u63D0\u4EA4")))]),a("Button",{attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("\u91CD\u7F6E")))])],1)],1)},O=[];const E={name:"SystemAibot",props:{type:{default:""}},data(){return{loadIng:0,formData:{},ruleData:{},aiConfig:F}},mounted(){this.systemSetting()},computed:{...c(["formOptions"]),fields({aiConfig:t,type:s}){var l;if(!((l=t.aiList)!=null&&l[s]))return[];const a=JSON.parse(JSON.stringify(t.fields)),{extraFields:e=[]}=t.aiList[s],o=a.map(i=>({...i,prop:`${s}_${i.prop}`}));e.forEach(i=>{const n={...i,prop:`${s}_${i.prop}`},d=o.findIndex(m=>m.prop===n.prop);if(d!==-1)o[d]={...o[d],...n};else if(i.after){const m=o.findIndex(y=>y.prop===`${s}_${i.after}`);m!==-1?o.splice(m+1,0,n):o.push(n)}else o.push(n)});let r=9999999;return o.forEach(i=>{typeof i.sort=="undefined"&&(i.sort=++r)}),o.sort((i,n)=>i.sort-n.sort),o}},methods:{modelOption(t){const s=this.formData[t+"s"];return s?k(s):[]},submitForm(){this.$refs.formData.validate(t=>{t&&this.systemSetting(!0)})},resetForm(){this.formData=$A.cloneJSON(this.formDatum_bak)},systemSetting(t){const s=this.fields.map(e=>e.prop),a=Object.fromEntries(Object.entries(this.formData).filter(([e])=>s.includes(e)));this.loadIng++,this.$store.dispatch("call",{url:"system/setting/aibot?type="+(t?"save":"all"),data:t?a:{}}).then(({data:e})=>{t&&$A.messageSuccess("\u4FEE\u6539\u6210\u529F"),this.$emit("on-update-setting",e),this.formData=e,this.formDatum_bak=$A.cloneJSON(this.formData)}).catch(({msg:e})=>{t&&$A.modalError(e)}).finally(e=>{this.loadIng--})},functionClick(t){if(t===`${this.type}_models`){const s={};if(this.type==="ollama"){if(!this.formData[`${this.type}_base_url`]){$A.modalError("\u8BF7\u5148\u586B\u5199 Base URL");return}s.base_url=this.formData[`${this.type}_base_url`],s.key=this.formData[`${this.type}_key`],s.agency=this.formData[`${this.type}_agency`]}this.$store.dispatch("call",{url:"system/setting/aibot_defmodels?type="+this.type,data:s,spinner:600}).then(({data:a})=>{this.formData[t]=a.models.join(`
`),$A.messageSuccess("\u83B7\u53D6\u6210\u529F")}).catch(({msg:a})=>{$A.modalError(a||"\u83B7\u53D6\u5931\u8D25")})}else $A.messageError("\u672A\u77E5\u64CD\u4F5C")}}},_={};var P=p(E,R,O,!1,T,null,null,null);function T(t){for(let s in _)this[s]=_[s]}var B=function(){return P.exports}(),U=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setting-component-item"},[a("Form",t._b({ref:"formData",attrs:{model:t.formData,rules:t.ruleData},nativeOn:{submit:function(e){e.preventDefault()}}},"Form",t.formOptions,!1),[a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u7B7E\u5230\u8BBE\u7F6E")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u529F\u80FD\u5F00\u542F"),prop:"open"}},[a("RadioGroup",{model:{value:t.formData.open,callback:function(e){t.$set(t.formData,"open",e)},expression:"formData.open"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1),a("div",{staticClass:"export-data"},[a("p",{on:{click:function(e){t.allUserShow=!0}}},[t._v(t._s(t.$L("\u4F1A\u5458\u7B7E\u5230\u8BBE\u7F6E")))]),a("p",{on:{click:function(e){t.exportShow=!0}}},[t._v(t._s(t.$L("\u5BFC\u51FA\u7B7E\u5230\u6570\u636E")))])])],1),t.formData.open==="open"?[a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u65F6\u95F4"),prop:"time"}},[a("TimePicker",{attrs:{type:"timerange",format:"HH:mm",placeholder:t.$L("\u8BF7\u9009\u62E9\u7B7E\u5230\u65F6\u95F4")},model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}}),a("Form",{staticClass:"block-setting-advance",nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{attrs:{label:t.$L("\u6700\u65E9\u53EF\u63D0\u524D"),prop:"advance"}},[a("div",{staticClass:"input-number-box"},[a("InputNumber",{attrs:{min:0,step:1},model:{value:t.formData.advance,callback:function(e){t.$set(t.formData,"advance",e)},expression:"formData.advance"}}),a("label",[t._v(t._s(t.$L("\u5206\u949F")))])],1)]),a("FormItem",{attrs:{label:t.$L("\u6700\u665A\u53EF\u5EF6\u540E"),prop:"delay"}},[a("div",{staticClass:"input-number-box"},[a("InputNumber",{attrs:{min:0,step:1},model:{value:t.formData.delay,callback:function(e){t.$set(t.formData,"delay",e)},expression:"formData.delay"}}),a("label",[t._v(t._s(t.$L("\u5206\u949F")))])],1)]),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u7B7E\u5230\u524D\u540E\u65F6\u95F4\u6536\u5230\u6D88\u606F\u901A\u77E5")))]),a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u6253\u5361\u63D0\u9192"),prop:"remindin"}},[a("div",{staticClass:"input-number-box"},[a("InputNumber",{attrs:{min:0,step:1},model:{value:t.formData.remindin,callback:function(e){t.$set(t.formData,"remindin",e)},expression:"formData.remindin"}}),a("label",[t._v(t._s(t.$L("\u5206\u949F")))])],1)]),a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u7F3A\u5361\u63D0\u9192"),prop:"remindexceed"}},[a("div",{staticClass:"input-number-box"},[a("InputNumber",{attrs:{min:0,step:1},model:{value:t.formData.remindexceed,callback:function(e){t.$set(t.formData,"remindexceed",e)},expression:"formData.remindexceed"}}),a("label",[t._v(t._s(t.$L("\u5206\u949F")))])],1)]),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u7B7E\u5230\u63D0\u9192\u5BF9\u8C61\uFF1A3\u5929\u5185\u6709\u7B7E\u5230\u7684\u6210\u5458\uFF08\u6CD5\u5B9A\u5DE5\u4F5C\u65E5\uFF09")))])],1)],1),a("FormItem",{attrs:{label:t.$L("\u5141\u8BB8\u4FEE\u6539"),prop:"edit"}},[a("RadioGroup",{model:{value:t.formData.face_upload,callback:function(e){t.$set(t.formData,"face_upload",e)},expression:"formData.face_upload"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5141\u8BB8")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u7981\u6B62")))])],1),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u5141\u8BB8\u6210\u5458\u81EA\u5DF1\u4E0A\u4F20\u4EBA\u8138\u56FE\u7247")))]),a("RadioGroup",{model:{value:t.formData.edit,callback:function(e){t.$set(t.formData,"edit",e)},expression:"formData.edit"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5141\u8BB8")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u7981\u6B62")))])],1),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u5141\u8BB8\u6210\u5458\u81EA\u5DF1\u4FEE\u6539MAC\u5730\u5740"))+" ("+t._s(t.$L("WiFi\u7B7E\u5230"))+")")])],1),a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u65B9\u5F0F"),prop:"modes"}},[a("CheckboxGroup",{model:{value:t.formData.modes,callback:function(e){t.$set(t.formData,"modes",e)},expression:"formData.modes"}},[a("Checkbox",{attrs:{label:"face"}},[t._v(t._s(t.$L("\u4EBA\u8138\u7B7E\u5230")))]),a("Checkbox",{attrs:{label:"auto"}},[t._v(t._s(t.$L("WiFi\u7B7E\u5230")))]),a("Checkbox",{attrs:{label:"locat"}},[t._v(t._s(t.$L("\u5B9A\u4F4D\u7B7E\u5230")))]),a("Checkbox",{attrs:{label:"manual"}},[t._v(t._s(t.$L("\u624B\u52A8\u7B7E\u5230")))])],1),t.formData.modes.includes("face")?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u4EBA\u8138\u7B7E\u5230"))+": "+t._s(t.$L("\u901A\u8FC7\u4EBA\u8138\u8BC6\u522B\u673A\u7B7E\u5230")))]):t._e(),t.formData.modes.includes("auto")?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("WiFi\u7B7E\u5230"))+": "+t._s(t.$L("\u8BE6\u60C5\u770B\u4E0B\u6587\u5B89\u88C5\u8BF4\u660E")))]):t._e(),t.formData.modes.includes("locat")?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u5B9A\u4F4D\u7B7E\u5230"))+": "+t._s(t.$L("\u901A\u8FC7\u5728\u7B7E\u5230\u6253\u5361\u673A\u5668\u4EBA\u53D1\u9001\u4F4D\u7F6E\u7B7E\u5230"))+" ("+t._s(t.$L("\u4EC5\u652F\u6301\u79FB\u52A8\u7AEFApp"))+")")]):t._e(),t.formData.modes.includes("manual")?a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u624B\u52A8\u7B7E\u5230"))+": "+t._s(t.$L("\u901A\u8FC7\u5728\u7B7E\u5230\u6253\u5361\u673A\u5668\u4EBA\u53D1\u9001\u6307\u4EE4\u7B7E\u5230")))]):t._e()],1)]:t._e()],2)]),t.formData.open==="open"?[t.formData.modes.includes("face")?[a("div",{staticClass:"block-setting-space"}),a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u4EBA\u8138\u7B7E\u5230")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u5907\u6CE8"),prop:"face_remark"}},[a("Input",{attrs:{maxlength:30},model:{value:t.formData.face_remark,callback:function(e){t.$set(t.formData,"face_remark",e)},expression:"formData.face_remark"}})],1),a("FormItem",{attrs:{label:t.$L("\u91CD\u590D\u6253\u5361\u63D0\u9192"),prop:"face_retip"}},[a("RadioGroup",{model:{value:t.formData.face_retip,callback:function(e){t.$set(t.formData,"face_retip",e)},expression:"formData.face_retip"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1)],1)],1)])]:t._e(),t.formData.modes.includes("auto")?[a("div",{staticClass:"block-setting-space"}),a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("WiFi\u7B7E\u5230")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u5B89\u88C5\u8BF4\u660E"),prop:"explain"}},[a("p",[t._v("1. "+t._s(t.$L("WiFi\u7B7E\u5230\u5EF6\u8FDF\u65F6\u957F\u4E3A\xB11\u5206\u949F\u3002")))]),a("p",[t._v("2. "+t._s(t.$L("\u8BBE\u5907\u8FDE\u63A5\u4E0A\u6307\u5B9A\u8DEF\u7531\u5668\uFF08WiFi\uFF09\u540E\u81EA\u52A8\u7B7E\u5230\u3002")))]),a("p",[t._v("3. "+t._s(t.$L("\u4EC5\u652F\u6301Openwrt\u7CFB\u7EDF\u7684\u8DEF\u7531\u5668\u3002")))]),a("p",[t._v("4. "+t._s(t.$L("\u5173\u95ED\u7B7E\u5230\u529F\u80FD\u518D\u5F00\u542F\u9700\u8981\u91CD\u65B0\u5B89\u88C5\u3002")))]),a("p",[t._v("5. "+t._s(t.$L("\u8FDB\u5165\u8DEF\u7531\u5668\u7EC8\u7AEF\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5373\u53EF\u5B8C\u6210\u5B89\u88C5"))+":")]),a("Input",{ref:"cmd",staticStyle:{"margin-top":"6px"},attrs:{type:"textarea",readonly:"",value:t.formData.cmd},on:{"on-focus":t.clickCmd}})],1)],1)])]:t._e(),t.formData.modes.includes("locat")?[a("div",{staticClass:"block-setting-space"}),a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u5B9A\u4F4D\u7B7E\u5230")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u5907\u6CE8"),prop:"locat_remark"}},[a("Input",{attrs:{maxlength:30},model:{value:t.formData.locat_remark,callback:function(e){t.$set(t.formData,"locat_remark",e)},expression:"formData.locat_remark"}})],1),a("FormItem",{attrs:{label:t.$L("\u767E\u5EA6\u5730\u56FEAK"),prop:"locat_bd_lbs_key"}},[a("Input",{attrs:{maxlength:100},model:{value:t.formData.locat_bd_lbs_key,callback:function(e){t.$set(t.formData,"locat_bd_lbs_key",e)},expression:"formData.locat_bd_lbs_key"}}),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u83B7\u53D6AK\u6D41\u7A0B"))+": "),a("a",{attrs:{href:"https://lbs.baidu.com/faq/search?id=299&title=677",target:"_blank"}},[t._v("https://lbs.baidu.com/faq/search?id=299&title=677")])])],1),a("FormItem",{attrs:{label:t.$L("\u5141\u8BB8\u7B7E\u5230\u4F4D\u7F6E"),prop:"locat_bd_allow_point"}},[t.formData.locat_bd_lbs_point.lng?a("ETooltip",{attrs:{content:t.$L("\u70B9\u51FB\u4FEE\u6539")}},[a("div",{staticClass:"form-tip"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:t.openBdSelect}},[t._v(" "+t._s(t.$L(`\u7ECF\u5EA6\uFF1A${t.formData.locat_bd_lbs_point.lng}\uFF0C\u7EAC\u5EA6\uFF1A${t.formData.locat_bd_lbs_point.lat}\uFF0C\u534A\u5F84\uFF1A${t.formData.locat_bd_lbs_point.radius}\u7C73`))+" ")])])]):a("a",{attrs:{href:"javascript:void(0)"},on:{click:t.openBdSelect}},[t._v(t._s(t.$L("\u70B9\u51FB\u8BBE\u7F6E")))])],1)],1)])]:t._e(),t.formData.modes.includes("manual")?[a("div",{staticClass:"block-setting-space"}),a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u624B\u52A8\u7B7E\u5230")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u7B7E\u5230\u5907\u6CE8"),prop:"manual_remark"}},[a("Input",{attrs:{maxlength:30},model:{value:t.formData.manual_remark,callback:function(e){t.$set(t.formData,"manual_remark",e)},expression:"formData.manual_remark"}})],1)],1)])]:t._e()]:t._e()],2),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("\u63D0\u4EA4")))]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("\u91CD\u7F6E")))])],1),a("CheckinExport",{model:{value:t.exportShow,callback:function(e){t.exportShow=e},expression:"exportShow"}}),a("DrawerOverlay",{attrs:{placement:"right",size:1380},model:{value:t.allUserShow,callback:function(e){t.allUserShow=e},expression:"allUserShow"}},[t.allUserShow?a("TeamManagement",{attrs:{"checkin-mode":""}}):t._e()],1),a("Modal",{attrs:{title:t.$L("\u5141\u8BB8\u7B7E\u5230\u4F4D\u7F6E"),"mask-closable":!1,width:"800"},model:{value:t.bdSelectShow,callback:function(e){t.bdSelectShow=e},expression:"bdSelectShow"}},[a("div",[t.bdSelectPoint.radius?a("div",{staticClass:"bd-select-point-tip"},[t._v(t._s(t.$L(`\u7B7E\u5230\u534A\u5F84${t.bdSelectPoint.radius}\u7C73`)))]):a("div",{staticClass:"bd-select-point-tip"},[t._v(t._s(t.$L("\u8BF7\u70B9\u51FB\u5730\u56FE\u9009\u62E9\u7B7E\u5230\u4F4D\u7F6E")))]),t.bdSelectShow?a("IFrame",{staticClass:"bd-select-point-iframe",attrs:{src:t.bdSelectUrl},on:{"on-message":t.onBdMessage}}):t._e()],1),a("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(e){t.bdSelectShow=!1}}},[t._v(t._s(t.$L("\u5173\u95ED")))]),a("Button",{attrs:{type:"primary"},on:{click:t.onBdSelect}},[t._v(t._s(t.$L("\u786E\u5B9A")))])],1)])],1)},N=[];const M={name:"SystemCheckin",components:{IFrame:C,CheckinExport:S,TeamManagement:w,DrawerOverlay:D},data(){return{loadIng:0,formData:{open:"",edit:"",cmd:"",modes:[],face_upload:"",face_remark:"",face_retip:"",manual_remark:"",locat_remark:"",locat_bd_lbs_point:{}},ruleData:{},allUserShow:!1,exportShow:!1,bdSelectShow:!1,bdSelectPoint:{},bdSelectUrl:""}},mounted(){this.systemSetting()},computed:{...c(["formOptions"])},methods:{submitForm(){this.$refs.formData.validate(t=>{t&&this.systemSetting(!0)})},resetForm(){this.formData=$A.cloneJSON(this.formDatum_bak)},systemSetting(t){this.loadIng++,this.formData.cmd="",this.$store.dispatch("call",{url:"system/setting/checkin?type="+(t?"save":"all"),data:this.formData}).then(({data:s})=>{t&&$A.messageSuccess("\u4FEE\u6539\u6210\u529F"),this.formData=s;try{this.formData.cmd=atob(this.formData.cmd)}catch{}this.formDatum_bak=$A.cloneJSON(this.formData)}).catch(({msg:s})=>{t&&$A.modalError(s)}).finally(s=>{this.loadIng--})},clickCmd(){this.$nextTick(t=>{this.$refs.cmd.focus({cursor:"all"})})},openBdSelect(){if(!this.formData.locat_bd_lbs_key){$A.messageError("\u8BF7\u5148\u586B\u5199\u767E\u5EA6\u5730\u56FEAK");return}const t=$A.urlAddParams($A.mainUrl("tools/map/select.html"),{key:this.formData.locat_bd_lbs_key,point:this.formData.locat_bd_lbs_point.lng+","+this.formData.locat_bd_lbs_point.lat,radius:this.formData.locat_bd_lbs_point.radius});this.$store.dispatch("userUrl",t).then(s=>{this.bdSelectUrl=s,this.bdSelectPoint=this.formData.locat_bd_lbs_point,this.bdSelectShow=!0})},onBdMessage(t){t.action==="bd_lbs_select_point"&&(this.bdSelectPoint={lng:t.longitude,lat:t.latitude,radius:t.radius})},onBdSelect(){this.formData.locat_bd_lbs_point=this.bdSelectPoint,this.bdSelectShow=!1}}},f={};var z=p(M,U,N,!1,j,"5f600414",null,null);function j(t){for(let s in f)this[s]=f[s]}var G=function(){return z.exports}(),K=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setting-component-item"},[a("Form",t._b({ref:"formData",attrs:{model:t.formData,rules:t.ruleData},nativeOn:{submit:function(e){e.preventDefault()}}},"Form",t.formOptions,!1),[a("div",{staticClass:"block-setting-box"},[a("h3",[t._v("AgoraIO \u58F0\u7F51")]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u4F1A\u8BAE\u529F\u80FD"),prop:"open"}},[a("RadioGroup",{model:{value:t.formData.open,callback:function(e){t.$set(t.formData,"open",e)},expression:"formData.open"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1)],1),t.formData.open==="open"?[a("Divider",{attrs:{orientation:"left"}},[t._v(t._s(t.$L("\u57FA\u672C\u914D\u7F6E")))]),a("div",{staticClass:"form-tip form-list"},[a("ul",[a("li",[t._v(t._s(t.$L("\u57FA\u672C\u914D\u7F6E"))+": "+t._s(t.$L("\u7528\u4E8E\u751F\u6210\u4F1A\u8BAE\u9891\u9053\u3002")))]),a("li",[t._v(t._s(t.$L("\u83B7\u53D6\u65B9\u5F0F"))+": "),a("a",{attrs:{href:"https://docportal.shengwang.cn/cn/Agora%20Platform/token_server#%E8%8E%B7%E5%8F%96-app-id-%E5%8F%8A-app-%E8%AF%81%E4%B9%A6",target:"_blank"}},[t._v("Open Link")])])])]),a("FormItem",{attrs:{label:"App ID ",prop:"appid"}},[a("Input",{attrs:{maxlength:255},model:{value:t.formData.appid,callback:function(e){t.$set(t.formData,"appid",e)},expression:"formData.appid"}})],1),a("FormItem",{attrs:{label:"App certificate",prop:"app_certificate"}},[a("Input",{attrs:{maxlength:255,type:"password"},model:{value:t.formData.app_certificate,callback:function(e){t.$set(t.formData,"app_certificate",e)},expression:"formData.app_certificate"}})],1),a("div",{staticClass:"clearfix"}),a("Divider",{attrs:{orientation:"left"}},[t._v("RESTful Api\uFF08"+t._s(t.$L("\u53EF\u9009"))+"\uFF09")]),a("div",{staticClass:"form-tip form-list"},[a("ul",[a("li",[t._v("RESTful Api: "+t._s(t.$L("\u7528\u4E8E\u9891\u9053\u7BA1\u7406\u3002"))+" ("+t._s(t.$L("\u6BD4\u5982"))+": "+t._s(t.$L("\u7ED3\u675F\u4F1A\u8BAE\u5BA4"))+")")]),a("li",[t._v(t._s(t.$L("\u83B7\u53D6\u65B9\u5F0F"))+" "),a("a",{attrs:{href:"https://doc.shengwang.cn/doc/rtc/restful/get-started/enable-service#%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7-id-%E5%92%8C%E5%AE%A2%E6%88%B7%E5%AF%86%E9%92%A5",target:"_blank"}},[t._v("Open Link")])])])]),a("FormItem",{attrs:{label:"key ",prop:"api_key"}},[a("Input",{attrs:{maxlength:255},model:{value:t.formData.api_key,callback:function(e){t.$set(t.formData,"api_key",e)},expression:"formData.api_key"}})],1),a("FormItem",{attrs:{label:"secret",prop:"secret"}},[a("Input",{attrs:{maxlength:255,type:"password"},model:{value:t.formData.api_secret,callback:function(e){t.$set(t.formData,"api_secret",e)},expression:"formData.api_secret"}})],1)]:t._e()],2)])]),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("\u63D0\u4EA4")))]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("\u91CD\u7F6E")))])],1)],1)},J=[];const W={name:"SystemMeeting",data(){return{loadIng:0,formData:{open:"",appid:"",app_certificate:""},ruleData:{}}},mounted(){this.systemSetting()},computed:{...c(["formOptions"])},methods:{submitForm(){this.$refs.formData.validate(t=>{t&&this.systemSetting(!0)})},resetForm(){this.formData=$A.cloneJSON(this.formDatum_bak)},systemSetting(t){this.loadIng++,this.$store.dispatch("call",{url:"system/setting/meeting?type="+(t?"save":"all"),data:this.formData}).then(({data:s})=>{t&&$A.messageSuccess("\u4FEE\u6539\u6210\u529F"),this.formData=s,this.formDatum_bak=$A.cloneJSON(this.formData)}).catch(({msg:s})=>{t&&$A.modalError(s)}).finally(s=>{this.loadIng--})}}},v={};var q=p(W,K,J,!1,H,null,null,null);function H(t){for(let s in v)this[s]=v[s]}var V=function(){return q.exports}(),Z=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setting-component-item"},[a("Form",t._b({ref:"formData",attrs:{model:t.formData,rules:t.ruleData},nativeOn:{submit:function(e){e.preventDefault()}}},"Form",t.formOptions,!1),[a("div",{staticClass:"block-setting-box"},[a("h3",[t._v("LDAP")]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u542F\u7528 LDAP \u8BA4\u8BC1"),prop:"ldap_open"}},[a("RadioGroup",{model:{value:t.formData.ldap_open,callback:function(e){t.$set(t.formData,"ldap_open",e)},expression:"formData.ldap_open"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u5F00\u542F\u540E\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528 LDAP \u5E10\u53F7\u5BC6\u7801\u767B\u5F55")))])],1),t.formData.ldap_open==="open"?[a("FormItem",{attrs:{label:t.$L("LDAP \u5730\u5740"),prop:"ldap_host"}},[a("Input",{model:{value:t.formData.ldap_host,callback:function(e){t.$set(t.formData,"ldap_host",e)},expression:"formData.ldap_host"}}),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u4F8B\u5982"))+": 192.168.1.200\u3001www.ldap.com")])],1),a("FormItem",{attrs:{label:t.$L("LDAP \u7AEF\u53E3"),prop:"ldap_port"}},[a("Input",{attrs:{type:"number",placeholder:`${t.$L("\u9ED8\u8BA4")}: 389`},model:{value:t.formData.ldap_port,callback:function(e){t.$set(t.formData,"ldap_port",e)},expression:"formData.ldap_port"}})],1),a("FormItem",{attrs:{label:"Base DN",prop:"ldap_base_dn"}},[a("Input",{model:{value:t.formData.ldap_base_dn,callback:function(e){t.$set(t.formData,"ldap_base_dn",e)},expression:"formData.ldap_base_dn"}})],1),a("FormItem",{attrs:{label:"User DN",prop:"ldap_user_dn"}},[a("Input",{model:{value:t.formData.ldap_user_dn,callback:function(e){t.$set(t.formData,"ldap_user_dn",e)},expression:"formData.ldap_user_dn"}})],1),a("FormItem",{attrs:{label:t.$L("\u5BC6\u7801"),prop:"ldap_password"}},[a("Input",{attrs:{type:"password"},model:{value:t.formData.ldap_password,callback:function(e){t.$set(t.formData,"ldap_password",e)},expression:"formData.ldap_password"}})],1),a("FormItem",{attrs:{label:t.$L("\u540C\u6B65\u672C\u5730\u5E10\u53F7"),prop:"ldap_sync_local"}},[a("RadioGroup",{model:{value:t.formData.ldap_sync_local,callback:function(e){t.$set(t.formData,"ldap_sync_local",e)},expression:"formData.ldap_sync_local"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u5F00\u542F\u540C\u6B65\u672C\u5730\u5E10\u53F7\u767B\u5F55\u540E\u5C06\u540C\u6B65\u5230 LDAP \u670D\u52A1\u5668")))])],1),a("FormItem",[a("Button",{attrs:{loading:t.testLoad},on:{click:t.checkTest}},[t._v(t._s(t.$L("\u6D4B\u8BD5\u94FE\u63A5")))])],1)]:t._e()],2)])]),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("\u63D0\u4EA4")))]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("\u91CD\u7F6E")))])],1)],1)},Q=[];const X={name:"SystemThirdAccess",data(){return{loadIng:0,formData:{},ruleData:{},testLoad:!1}},mounted(){this.systemSetting()},computed:{...c(["formOptions"])},methods:{submitForm(){this.$refs.formData.validate(t=>{t&&this.systemSetting(!0)})},resetForm(){this.formData=$A.cloneJSON(this.formDatum_bak)},systemSetting(t){this.loadIng++,this.$store.dispatch("call",{url:"system/setting/thirdaccess?type="+(t?"save":"all"),data:this.formData}).then(({data:s})=>{t&&$A.messageSuccess("\u4FEE\u6539\u6210\u529F"),this.formData=s,this.formDatum_bak=$A.cloneJSON(this.formData)}).catch(({msg:s})=>{t&&$A.modalError(s)}).finally(s=>{this.loadIng--})},checkTest(){this.testLoad||(this.testLoad=!0,this.$store.dispatch("call",{url:"system/setting/thirdaccess?type=testldap",data:this.formData}).then(({msg:t})=>{$A.messageSuccess(t)}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.testLoad=!1}))}}},h={};var Y=p(X,Z,Q,!1,tt,null,null,null);function tt(t){for(let s in h)this[s]=h[s]}var at=function(){return Y.exports}(),et=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setting-component-item"},[a("Form",t._b({ref:"formData",attrs:{model:t.formData,rules:t.ruleData},nativeOn:{submit:function(e){e.preventDefault()}}},"Form",t.formOptions,!1),[a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u90AE\u7BB1\u670D\u52A1\u5668\u8BBE\u7F6E")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("SMTP\u670D\u52A1\u5668"),prop:"smtp_server"}},[a("Input",{model:{value:t.formData.smtp_server,callback:function(e){t.$set(t.formData,"smtp_server",e)},expression:"formData.smtp_server"}})],1),a("FormItem",{attrs:{label:t.$L("\u7AEF\u53E3"),prop:"port"}},[a("Input",{attrs:{maxlength:20},model:{value:t.formData.port,callback:function(e){t.$set(t.formData,"port",e)},expression:"formData.port"}})],1),a("FormItem",{attrs:{label:t.$L("\u5E10\u53F7"),prop:"account"}},[a("Input",{attrs:{maxlength:128},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("FormItem",{attrs:{label:t.$L("\u5BC6\u7801"),prop:"password"}},[a("Input",{attrs:{maxlength:128,type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("FormItem",[a("Button",{on:{click:t.checkEmailSend}},[t._v(t._s(t.$L("\u90AE\u4EF6\u53D1\u9001\u6D4B\u8BD5")))])],1)],1)]),a("div",{staticClass:"block-setting-space"}),a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u90AE\u4EF6\u901A\u77E5\u8BBE\u7F6E")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u5F00\u542F\u6CE8\u518C\u9A8C\u8BC1"),prop:"reg_verify"}},[a("RadioGroup",{model:{value:t.formData.reg_verify,callback:function(e){t.$set(t.formData,"reg_verify",e)},expression:"formData.reg_verify"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1),t.formData.reg_verify=="open"?a("div",{staticClass:"form-tip"},[t._v(" "+t._s(t.$L("\u5F00\u542F\u540E"))+":"),a("br"),t._v(" \u2460 "+t._s(t.$L("\u5E10\u53F7\u9700\u9A8C\u8BC1\u901A\u8FC7\u624D\u53EF\u767B\u5F55"))),a("br"),t._v(" \u2461 "+t._s(t.$L("\u4FEE\u6539\u90AE\u7BB1\u548C\u5220\u9664\u5E10\u53F7\u9700\u8981\u90AE\u7BB1\u9A8C\u8BC1\u7801"))+" ")]):t._e()],1),a("FormItem",{attrs:{label:t.$L("\u6D88\u606F\u63D0\u9192"),prop:"notice_msg"}},[a("RadioGroup",{model:{value:t.formData.notice_msg,callback:function(e){t.$set(t.formData,"notice_msg",e)},expression:"formData.notice_msg"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1),t.formData.notice_msg=="open"?a("Form",{staticClass:"block-setting-msg-unread",nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{attrs:{label:t.$L("\u901A\u77E5\u65F6\u95F4")}},[a("div",{staticClass:"input-range-box"},[t._l(t.formData.msg_unread_time_ranges,function(e,o){return a("div",{key:o,staticClass:"input-range-item"},[a("TimePicker",{attrs:{type:"timerange",format:"HH:mm",placeholder:t.$L("\u9009\u62E9\u65F6\u95F4\u8303\u56F4"),transfer:""},model:{value:t.formData.msg_unread_time_ranges[o],callback:function(r){t.$set(t.formData.msg_unread_time_ranges,o,r)},expression:"formData.msg_unread_time_ranges[index]"}})],1)}),a("Button",{attrs:{type:"default",icon:"md-add"},on:{click:t.onAddTimeRange}},[t._v(t._s(t.$L("\u6DFB\u52A0\u65F6\u95F4\u8303\u56F4")))]),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u4EC5\u5728\u6307\u5B9A\u65F6\u95F4\u8303\u56F4\u5185\u53D1\u9001\u90AE\u4EF6\u901A\u77E5\u3002")))])],2)]),a("FormItem",{attrs:{label:t.$L("\u672A\u8BFB\u4E2A\u4EBA\u6D88\u606F"),prop:"msg_unread_user_minute"}},[a("div",{staticClass:"input-number-box"},[a("InputNumber",{attrs:{min:0,step:1},model:{value:t.formData.msg_unread_user_minute,callback:function(e){t.$set(t.formData,"msg_unread_user_minute",e)},expression:"formData.msg_unread_user_minute"}}),a("label",[t._v(t._s(t.$L("\u5206\u949F")))])],1)]),a("FormItem",{attrs:{label:t.$L("\u672A\u8BFB\u7FA4\u804A\u6D88\u606F"),prop:"msg_unread_group_minute"}},[a("div",{staticClass:"input-number-box"},[a("InputNumber",{attrs:{min:0,step:1},model:{value:t.formData.msg_unread_group_minute,callback:function(e){t.$set(t.formData,"msg_unread_group_minute",e)},expression:"formData.msg_unread_group_minute"}}),a("label",[t._v(t._s(t.$L("\u5206\u949F")))])],1)]),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u672A\u8BFB\u6D88\u606F\u8D85\u8FC7\u6307\u5B9A\u65F6\u95F4\u540E\u53D1\u9001\u90AE\u4EF6\u901A\u77E5\uFF0C\u8BBE\u4E3A-1\u5219\u4E0D\u901A\u77E5\u3002")))])],1):t._e()],1)],1)]),a("div",{staticClass:"block-setting-space"}),a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u5FFD\u7565\u90AE\u7BB1\u5730\u5740")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u5FFD\u7565\u90AE\u7BB1"),prop:"ignore_addr"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:50}},model:{value:t.formData.ignore_addr,callback:function(e){t.$set(t.formData,"ignore_addr",e)},expression:"formData.ignore_addr"}}),a("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u4E0D\u4F1A\u5411\u5FFD\u7565\u7684\u90AE\u7BB1\u5730\u5740\u53D1\u9001\u90AE\u4EF6\uFF0C\u53EF\u4F7F\u7528\u6362\u884C\u5206\u5272\u591A\u4E2A\u5730\u5740\u3002")))])],1)],1)])]),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("\u63D0\u4EA4")))]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("\u91CD\u7F6E")))])],1)],1)},st=[];const ot={name:"SystemEmailSetting",data(){return{loadIng:0,formData:{smtp_server:"",port:"",account:"",password:"",reg_verify:"colse",notice_msg:"open",msg_unread_user_minute:-1,msg_unread_group_minute:-1,ignore_addr:"",msg_unread_time_ranges:[[]]},ruleData:{}}},mounted(){this.systemSetting()},computed:{...c(["formOptions"])},methods:{submitForm(){this.$refs.formData.validate(t=>{t&&this.systemSetting(!0)})},resetForm(){this.formData=$A.cloneJSON(this.formDatum_bak)},onAddTimeRange(){if(this.formData.msg_unread_time_ranges.length>5){$A.messageError("\u6700\u591A\u6DFB\u52A05\u4E2A\u65F6\u95F4\u8303\u56F4");return}this.formData.msg_unread_time_ranges.push([])},systemSetting(t){this.loadIng++,this.$store.dispatch("call",{url:"system/setting/email?type="+(t?"save":"all"),data:this.formData}).then(({data:s})=>{t&&$A.messageSuccess("\u4FEE\u6539\u6210\u529F"),this.formData=s,this.formDatum_bak=$A.cloneJSON(this.formData)}).catch(({msg:s})=>{t&&$A.modalError(s)}).finally(s=>{this.loadIng--})},checkEmailSend(){$A.modalInput({title:"\u6D4B\u8BD5\u90AE\u4EF6",placeholder:"\u8BF7\u8F93\u5165\u6536\u4EF6\u4EBA\u5730\u5740",onOk:t=>t?$A.isEmail(t)?new Promise((s,a)=>{this.$store.dispatch("call",{url:"system/email/check",data:Object.assign(this.formData,{to:t})}).then(({msg:e})=>{s(e)}).catch(({msg:e})=>{a(e)})}):"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6536\u4EF6\u4EBA\u5730\u5740":"\u8BF7\u8F93\u5165\u6536\u4EF6\u4EBA\u5730\u5740"})}}},b={};var rt=p(ot,et,st,!1,it,null,null,null);function it(t){for(let s in b)this[s]=b[s]}var lt=function(){return rt.exports}(),nt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setting-component-item"},[a("Form",t._b({ref:"formData",attrs:{model:t.formData,rules:t.ruleData},nativeOn:{submit:function(e){e.preventDefault()}}},"Form",t.formOptions,!1),[a("div",{staticClass:"block-setting-box"},[a("h3",[t._v(t._s(t.$L("\u53CB\u76DF\u63A8\u9001")))]),a("div",{staticClass:"form-box"},[a("FormItem",{attrs:{label:t.$L("\u5F00\u542F\u63A8\u9001"),prop:"push"}},[a("RadioGroup",{model:{value:t.formData.push,callback:function(e){t.$set(t.formData,"push",e)},expression:"formData.push"}},[a("Radio",{attrs:{label:"open"}},[t._v(t._s(t.$L("\u5F00\u542F")))]),a("Radio",{attrs:{label:"close"}},[t._v(t._s(t.$L("\u5173\u95ED")))])],1)],1),t.formData.push==="open"?[a("Divider",{attrs:{orientation:"left"}},[t._v("iOS "+t._s(t.$L("\u53C2\u6570\u914D\u7F6E")))]),a("FormItem",{attrs:{label:"Appkey",prop:"ios_appkey"}},[a("Input",{attrs:{maxlength:255},model:{value:t.formData.ios_key,callback:function(e){t.$set(t.formData,"ios_key",e)},expression:"formData.ios_key"}})],1),a("FormItem",{attrs:{label:"App Master Secret",prop:"secret"}},[a("Input",{attrs:{maxlength:255,type:"password"},model:{value:t.formData.ios_secret,callback:function(e){t.$set(t.formData,"ios_secret",e)},expression:"formData.ios_secret"}})],1),a("Divider",{attrs:{orientation:"left"}},[t._v("Android "+t._s(t.$L("\u53C2\u6570\u914D\u7F6E")))]),a("FormItem",{attrs:{label:"Appkey",prop:"android_appkey"}},[a("Input",{attrs:{maxlength:255},model:{value:t.formData.android_key,callback:function(e){t.$set(t.formData,"android_key",e)},expression:"formData.android_key"}})],1),a("FormItem",{attrs:{label:"App Master Secret",prop:"secret"}},[a("Input",{attrs:{maxlength:255,type:"password"},model:{value:t.formData.android_secret,callback:function(e){t.$set(t.formData,"android_secret",e)},expression:"formData.android_secret"}})],1)]:t._e()],2)])]),a("div",{staticClass:"setting-footer"},[a("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$L("\u63D0\u4EA4")))]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loadIng>0},on:{click:t.resetForm}},[t._v(t._s(t.$L("\u91CD\u7F6E")))])],1)],1)},ct=[];const pt={name:"SystemAppPush",data(){return{loadIng:0,formData:{push:"",ios_key:"",ios_secret:"",android_key:"",android_secret:""},ruleData:{}}},mounted(){this.systemSetting()},computed:{...c(["formOptions"])},methods:{submitForm(){this.$refs.formData.validate(t=>{t&&this.systemSetting(!0)})},resetForm(){this.formData=$A.cloneJSON(this.formDatum_bak)},systemSetting(t){this.loadIng++,this.$store.dispatch("call",{url:"system/setting/apppush?type="+(t?"save":"all"),data:this.formData}).then(({data:s})=>{t&&$A.messageSuccess("\u4FEE\u6539\u6210\u529F"),this.formData=s,this.formDatum_bak=$A.cloneJSON(this.formData)}).catch(({msg:s})=>{t&&$A.modalError(s)}).finally(s=>{this.loadIng--})}}},g={};var mt=p(pt,nt,ct,!1,dt,null,null,null);function dt(t){for(let s in g)this[s]=g[s]}var ut=function(){return mt.exports}(),_t=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"page-apply"},[a("PageTitle",{attrs:{title:t.$L("\u5E94\u7528")}}),a("div",{staticClass:"apply-wrapper"},[a("div",{staticClass:"apply-head"},[a("div",{staticClass:"apply-nav"},[a("h1",[t._v(t._s(t.$L("\u5E94\u7528")))])])]),a("div",{staticClass:"apply-content"},[t._l(t.applyListTypes,function(e){return[t.isExistAdminList?a("div",{staticClass:"apply-row-title"},[t._v(" "+t._s(e=="base"?t.$L("\u5E38\u7528"):t.$L("\u7BA1\u7406\u5458"))+" ")]):t._e(),a("Row",{attrs:{gutter:16}},t._l(t.applyList,function(o,r){return(e=="base"&&!o.type||o.type==e)&&o.show!==!1?a("Col",{key:r,attrs:{xs:{span:6},sm:{span:6},lg:{span:6},xl:{span:6},xxl:{span:3}}},[a("div",{staticClass:"apply-col"},[a("div",{on:{click:function(l){return t.applyClick(o)}}},[a("div",{staticClass:"logo"},[a("div",{staticClass:"apply-icon no-dark-content",class:t.getLogoClass(o.value)}),a("div",{staticClass:"apply-box-top-report",on:{click:function(l){return l.stopPropagation(),t.applyClick(o,"badge")}}},[t.showBadge(o,"approve")?a("Badge",{attrs:{"overflow-count":999,count:t.approveUnreadNumber}}):t._e(),t.showBadge(o,"report")?a("Badge",{attrs:{"overflow-count":999,count:t.reportUnreadNumber}}):t._e()],1)]),a("p",[t._v(t._s(t.$L(o.label)))])])])]):t._e()}),1)]})],2)]),a("DrawerOverlay",{attrs:{placement:"right",size:1200},model:{value:t.workReportShow,callback:function(e){t.workReportShow=e},expression:"workReportShow"}},[t.workReportShow?a("Report",{on:{"on-read":function(e){return t.$store.dispatch("getReportUnread",1e3)}},model:{value:t.workReportTabs,callback:function(e){t.workReportTabs=e},expression:"workReportTabs"}}):t._e()],1),a("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:t.aibotShow,callback:function(e){t.aibotShow=e},expression:"aibotShow"}},[t.aibotShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("AI \u5217\u8868"))+" "),t.userIsAdmin?a("p",{on:{click:function(e){return t.applyClick({value:"robot-setting"},"openai")}}},[t._v(t._s(t.$L("\u673A\u5668\u4EBA\u8BBE\u7F6E")))]):t._e()]),a("div",{staticClass:"ivu-modal-wrap-apply-body full-body"},[a("ul",{staticClass:"ivu-modal-wrap-ul"},t._l(t.aibotList,function(e,o){return a("li",{key:o},[a("div",{staticClass:"modal-item-img"},[a("img",{attrs:{src:e.src}})]),a("div",{staticClass:"modal-item-info"},[a("h4",[t._v(t._s(e.label))]),a("p",{staticClass:"modal-item-desc",on:{click:function(r){return t.openDetail(e.desc)}}},[t._v(t._s(e.desc))]),e.tags.length>0?a("ul",{staticClass:"modal-item-tags"},t._l(e.tags,function(r,l){return a("li",{key:l},[t._v(t._s(r))])}),0):t._e(),a("div",{staticClass:"modal-item-btns"},[a("Button",{attrs:{icon:"md-chatbubbles",loading:t.aibotDialogSearchLoad==e.value},on:{click:function(r){return t.onGoToChat(e.value)}}},[t._v(t._s(t.$L("\u5F00\u59CB\u804A\u5929")))]),t.userIsAdmin?a("Button",{attrs:{icon:"md-settings"},on:{click:function(r){return t.applyClick({value:"robot-setting"},e.value)}}},[t._v(t._s(t.$L("\u8BBE\u7F6E")))]):t._e()],1)])])}),0)])]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:950},model:{value:t.aibotSettingShow,callback:function(e){t.aibotSettingShow=e},expression:"aibotSettingShow"}},[t.aibotSettingShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("AI \u8BBE\u7F6E"))+" "),a("p",{on:{click:function(e){t.aibotSettingShow=!1}}},[t._v(t._s(t.$L("\u8FD4\u56DE")))])]),a("div",{staticClass:"ivu-modal-wrap-apply-body"},[a("Tabs",{staticClass:"ai-tabs",attrs:{animated:!1},model:{value:t.aibotTabAction,callback:function(e){t.aibotTabAction=e},expression:"aibotTabAction"}},t._l(t.aibotList,function(e,o){return a("TabPane",{key:o,attrs:{label:e.label,name:e.value}},[a("div",{staticClass:"aibot-setting"},[t.aibotTabAction==e.value?a("SystemAibot",{attrs:{type:t.aibotTabAction},on:{"on-update-setting":t.handleAITags}}):t._e()],1)])}),1)],1)]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:500},model:{value:t.signInShow,callback:function(e){t.signInShow=e},expression:"signInShow"}},[t.signInShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("\u7B7E\u5230\u7BA1\u7406"))+" "),t.userIsAdmin?a("p",{on:{click:function(e){t.signInSettingShow=!0}}},[t._v(t._s(t.$L("\u7B7E\u5230\u8BBE\u7F6E")))]):t._e()]),a("div",{staticClass:"ivu-modal-wrap-apply-body"},[a("Checkin")],1)]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:t.signInSettingShow,callback:function(e){t.signInSettingShow=e},expression:"signInSettingShow"}},[t.signInSettingShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("\u7B7E\u5230\u8BBE\u7F6E"))+" "),a("p",{on:{click:function(e){t.signInSettingShow=!1}}},[t._v(t._s(t.$L("\u8FD4\u56DE")))])]),a("div",{staticClass:"ivu-modal-wrap-apply-body"},[a("SystemCheckin")],1)]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:t.meetingShow,callback:function(e){t.meetingShow=e},expression:"meetingShow"}},[t.meetingShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("\u4F1A\u8BAE"))+" "),t.userIsAdmin?a("p",{on:{click:function(e){t.meetingSettingShow=!0}}},[t._v(t._s(t.$L("\u4F1A\u8BAE\u8BBE\u7F6E")))]):t._e()]),a("div",{staticClass:"ivu-modal-wrap-apply-body full-body"},[a("ul",{staticClass:"ivu-modal-wrap-ul"},[a("li",[a("div",{staticClass:"modal-item-img"},[a("div",{staticClass:"apply-icon no-dark-content meeting"})]),a("div",{staticClass:"modal-item-info"},[a("h4",[t._v(t._s(t.$L("\u65B0\u4F1A\u8BAE")))]),a("p",{staticClass:"modal-item-desc",on:{click:function(e){return t.openDetail(t.meetingDescs.add)}}},[t._v(" "+t._s(t.meetingDescs.add)+" ")]),a("div",{staticClass:"modal-item-btns"},[a("Button",{on:{click:function(e){return t.onMeeting("createMeeting")}}},[t._v(t._s(t.$L("\u65B0\u5EFA\u4F1A\u8BAE")))])],1)])]),a("li",[a("div",{staticClass:"modal-item-img"},[a("div",{staticClass:"apply-icon no-dark-content meeting-join"})]),a("div",{staticClass:"modal-item-info"},[a("h4",[t._v(t._s(t.$L("\u52A0\u5165\u4F1A\u8BAE")))]),a("p",{staticClass:"modal-item-desc",on:{click:function(e){return t.openDetail(t.meetingDescs.join)}}},[t._v(t._s(t.meetingDescs.join))]),a("div",{staticClass:"modal-item-btns"},[a("Button",{on:{click:function(e){return t.onMeeting("joinMeeting")}}},[t._v(t._s(t.$L("\u52A0\u5165\u4F1A\u8BAE")))])],1)])])])])]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:600},model:{value:t.meetingSettingShow,callback:function(e){t.meetingSettingShow=e},expression:"meetingSettingShow"}},[t.meetingSettingShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("\u4F1A\u8BAE\u8BBE\u7F6E"))+" "),a("p",{on:{click:function(e){t.meetingSettingShow=!1}}},[t._v(t._s(t.$L("\u8FD4\u56DE")))])]),a("div",{staticClass:"ivu-modal-wrap-apply-body full-body"},[a("SystemMeeting")],1)]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:700},model:{value:t.ldapShow,callback:function(e){t.ldapShow=e},expression:"ldapShow"}},[t.ldapShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("LDAP \u8BBE\u7F6E"))+" ")]),a("div",{staticClass:"ivu-modal-wrap-apply-body"},[a("SystemThirdAccess")],1)]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:700},model:{value:t.mailShow,callback:function(e){t.mailShow=e},expression:"mailShow"}},[t.mailShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("\u90AE\u4EF6\u901A\u77E5"))+" ")]),a("div",{staticClass:"ivu-modal-wrap-apply-body"},[a("SystemEmailSetting")],1)]):t._e()]),a("DrawerOverlay",{attrs:{placement:"right",size:700},model:{value:t.appPushShow,callback:function(e){t.appPushShow=e},expression:"appPushShow"}},[t.appPushShow?a("div",{staticClass:"ivu-modal-wrap-apply"},[a("div",{staticClass:"ivu-modal-wrap-apply-title"},[t._v(" "+t._s(t.$L("APP \u63A8\u9001"))+" ")]),a("div",{staticClass:"ivu-modal-wrap-apply-body"},[a("SystemAppPush")],1)]):t._e()]),a("Modal",{attrs:{title:t.$L("\u626B\u7801\u767B\u5F55"),"mask-closable":!1},model:{value:t.scanLoginShow,callback:function(e){t.scanLoginShow=e},expression:"scanLoginShow"}},[a("div",{staticClass:"mobile-scan-login-box"},[a("div",{staticClass:"mobile-scan-login-title"},[t._v(t._s(t.$L("\u4F60\u597D\uFF0C\u626B\u7801\u786E\u8BA4\u767B\u5F55")))]),a("div",{staticClass:"mobile-scan-login-subtitle"},[t._v("\u300C"+t._s(t.$L("\u4E3A\u786E\u4FDD\u5E10\u53F7\u5B89\u5168\uFF0C\u8BF7\u786E\u8BA4\u662F\u672C\u4EBA\u64CD\u4F5C"))+"\u300D")])]),a("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(e){t.scanLoginShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88\u767B\u5F55")))]),a("Button",{attrs:{type:"primary",loading:t.scanLoginLoad},on:{click:t.scanLoginSubmit}},[t._v(t._s(t.$L("\u786E\u8BA4\u767B\u5F55")))])],1)]),a("UserSelect",{ref:"wordChainAndVoteRef",attrs:{"multiple-max":1,title:t.sendType=="vote"?t.$L("\u9009\u62E9\u7FA4\u7EC4\u53D1\u8D77\u6295\u7968"):t.$L("\u9009\u62E9\u7FA4\u7EC4\u53D1\u8D77\u63A5\u9F99"),"before-submit":t.goWordChainAndVote,"show-select-all":!1,"only-group":!0,"show-dialog":"",module:""},model:{value:t.sendData,callback:function(e){t.sendData=e},expression:"sendData"}})],1)},ft=[];const vt={components:{UserSelect:L,DrawerOverlay:D,Report:x,SystemAibot:B,SystemCheckin:G,Checkin:A,SystemMeeting:V,SystemThirdAccess:at,SystemEmailSetting:lt,SystemAppPush:ut},data(){return{applyList:[],applyListTypes:["base","admin"],workReportShow:!1,workReportTabs:"my",aibotList:I,aibotShow:!1,aibotSettingShow:!1,aibotTabAction:"openai",aibotDialogSearchLoad:"",signInShow:!1,signInSettingShow:!1,meetingShow:!1,meetingSettingShow:!1,meetingDescs:{add:this.$L("\u521B\u5EFA\u4E00\u4E2A\u5168\u65B0\u7684\u4F1A\u8BAE\u89C6\u9891\u4F1A\u8BAE\uFF0C\u4E0E\u4F1A\u8005\u53EF\u4EE5\u5728\u5B9E\u65F6\u4E2D\u8FDB\u884C\u9762\u5BF9\u9762\u7684\u89C6\u542C\u4EA4\u6D41\u3002")+this.$L("\u901A\u8FC7\u89C6\u9891\u4F1A\u8BAE\u5E73\u53F0\uFF0C\u53C2\u4E0E\u8005\u53EF\u4EE5\u5206\u4EAB\u5C4F\u5E55\u3001\u5171\u4EAB\u6587\u6863\uFF0C\u5E76\u4E0E\u5176\u4ED6\u4E0E\u4F1A\u4EBA\u5458\u8FDB\u884C\u8BA8\u8BBA\u548C\u534F\u3002"),join:this.$L("\u52A0\u5165\u89C6\u9891\u4F1A\u8BAE\uFF0C\u53C2\u4E0E\u5DF2\u7ECF\u521B\u5EFA\u7684\u4F1A\u8BAE\uFF0C\u5728\u4F1A\u8BAE\u8FC7\u7A0B\u4E2D\u4E0E\u5176\u4ED6\u53C2\u4F1A\u4EBA\u5458\u8FDB\u884C\u8FDC\u7A0B\u5B9E\u65F6\u89C6\u542C\u4EA4\u6D41\u548C\u534F\u4F5C\u3002")},ldapShow:!1,mailShow:!1,appPushShow:!1,scanLoginShow:!1,scanLoginLoad:!1,scanLoginCode:"",sendData:[],sendType:""}},activated(){this.initList()},computed:{...c(["systemConfig","userInfo","userIsAdmin","reportUnreadNumber","approveUnreadNumber","cacheDialogs","windowOrientation"]),isExistAdminList(){return this.applyList.map(t=>t.type).indexOf("admin")!==-1}},watch:{windowOrientation(){this.initList()}},methods:{initList(){let t=[{value:"approve",label:"\u5BA1\u6279\u4E2D\u5FC3",sort:3},{value:"report",label:"\u5DE5\u4F5C\u62A5\u544A",sort:5},{value:"okr",label:"OKR \u7BA1\u7406",sort:4},{value:"robot",label:"AI \u673A\u5668\u4EBA",sort:6},{value:"signin",label:"\u7B7E\u5230\u6253\u5361",sort:7},{value:"meeting",label:"\u5728\u7EBF\u4F1A\u8BAE",sort:8},{value:"word-chain",label:"\u7FA4\u63A5\u9F99",sort:9},{value:"vote",label:"\u7FA4\u6295\u7968",sort:10}];this.systemConfig.server_closeai==="close"&&(t=t.filter(a=>a.value!=="robot")),this.windowOrientation=="landscape"?t.push({value:"scan",label:"\u626B\u4E00\u626B",show:$A.isEEUiApp,sort:13}):t.push({value:"calendar",label:"\u65E5\u5386",sort:1},{value:"file",label:"\u6587\u4EF6",sort:2},{value:"addProject",label:"\u521B\u5EFA\u9879\u76EE",sort:11},{value:"addTask",label:"\u6DFB\u52A0\u4EFB\u52A1",sort:12},{value:"scan",label:"\u626B\u4E00\u626B",show:$A.isEEUiApp,sort:13},{value:"setting",label:"\u8BBE\u7F6E",sort:14});let s=[];this.userIsAdmin?s.push({value:"okrAnalyze",label:"OKR \u7ED3\u679C",sort:15},{value:"ldap",label:"LDAP",sort:16},{value:"mail",label:"\u90AE\u4EF6\u901A\u77E5",sort:17},{value:"appPush",label:"APP \u63A8\u9001",sort:18},{value:"complaint",label:"\u4E3E\u62A5\u7BA1\u7406",sort:19},{value:"allUser",label:"\u56E2\u961F\u7BA1\u7406",sort:20}):this.userInfo.department_owner&&s.push({value:"okrAnalyze",label:"OKR \u7ED3\u679C",sort:15}),s=s.map(a=>(a.type="admin",a)),this.applyList=[...t,...s].sort((a,e)=>a.sort<e.sort?-1:a.sort>e.sort?1:0)},getLogoClass(t){return t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t},showBadge(t,s){let a=0;switch(s){case"approve":a=this.approveUnreadNumber;break;case"report":a=this.reportUnreadNumber;break}return t.value==s&&a>0},applyClick(t,s=""){switch(t.value){case"approve":case"calendar":case"file":case"setting":this.goForward({name:"manage-"+t.value});break;case"okr":case"okrAnalyze":this.goForward({path:"/manage/apps/okr/"+(t.value=="okr"?"list":"analysis")});break;case"report":this.workReportTabs=s=="badge"?"receive":"my",this.workReportShow=!0;break;case"robot":this.getAITags(),this.aibotShow=!0;break;case"robot-setting":this.aibotTabAction=s,this.aibotSettingShow=!0;break;case"signin":this.signInShow=!0;break;case"meeting":this.meetingShow=!0;break;case"ldap":this.ldapShow=!0;break;case"mail":this.mailShow=!0;break;case"appPush":this.appPushShow=!0;break;case"scan":$A.eeuiAppScan(this.scanResult);return;case"word-chain":case"vote":this.sendData=[],this.sendType=t.value,this.$refs.wordChainAndVoteRef.onSelection();return}this.$emit("on-click",t.value)},getAITags(){this.$store.dispatch("call",{url:"system/setting/aibot_models"}).then(({data:t})=>{this.handleAITags(t)})},handleAITags(t){for(let s in t){const a=s.match(/^(.*?)_models$/);if(a){const e=a[1];this.aibotList.map(o=>{o.value==e&&(o.tags=k(t[s]).map(r=>r.label))})}}},onGoToChat(t){let s=0;this.cacheDialogs.map(a=>{a.email==`ai-${t}@bot.system`&&(s=a.id)}),s?(this.windowOrientation=="landscape"?this.goForward({name:"manage-messenger",params:{dialog_id:s}}):this.$store.dispatch("openDialog",s),this.aibotShow=!1):(this.aibotDialogSearchLoad=t,this.$store.dispatch("call",{url:"users/search/ai",data:{type:t}}).then(({data:a})=>{this.$store.dispatch("openDialogUserid",a.userid).then(e=>{this.windowOrientation=="landscape"&&this.goForward({name:"manage-messenger"}),this.aibotShow=!1}).catch(({msg:e})=>{$A.modalError(e)}).finally(e=>{this.aibotDialogSearchLoad=""})}).catch(({msg:a})=>{this.aibotDialogSearchLoad="",$A.messageError(a||"\u673A\u5668\u4EBA\u6682\u672A\u5F00\u542F")}))},onMeeting(t){switch(t){case"createMeeting":u.emit("addMeeting",{type:"create",userids:[this.userId]});break;case"joinMeeting":u.emit("addMeeting",{type:"join"});break}this.meetingShow=!1},scanResult(t){const s=(t+"").match(/^https?:\/\/(.*?)\/login\?qrcode=(.*?)$/);if(s){if($A.getDomain(t)!=$A.getDomain($A.mainUrl())){let a=this.$L("\u8BF7\u786E\u8BA4\u626B\u7801\u7684\u670D\u52A1\u5668\u4E0E\u5F53\u524D\u670D\u52A1\u5668\u4E00\u81F4");a+=`<br/>${this.$L("\u4E8C\u7EF4\u7801\u670D\u52A1\u5668")}: ${$A.getDomain(t)}`,a+=`<br/>${this.$L("\u5F53\u524D\u670D\u52A1\u5668")}: ${$A.getDomain($A.mainUrl())}`,$A.modalWarning({language:!1,title:this.$L("\u626B\u7801\u767B\u5F55"),content:a});return}this.scanLoginCode=s[2],this.scanLoginShow=!0;return}/^https?:\/\//i.test(t)&&this.$store.dispatch("openAppChildPage",{pageType:"app",pageTitle:" ",url:"web.js",params:{url:t,browser:!0,showProgress:!0}})},scanLoginSubmit(){this.scanLoginLoad!==!0&&(this.scanLoginLoad=!0,this.$store.dispatch("call",{url:"users/login/qrcode",data:{type:"login",code:this.scanLoginCode}}).then(({msg:t})=>{this.scanLoginShow=!1,$A.messageSuccess(t)}).catch(({msg:t})=>{$A.messageError(t)}).finally(t=>{this.scanLoginLoad=!1}))},openDetail(t){$A.modalInfo({content:t})},goWordChainAndVote(){const t=Number(this.sendData[0].replace("d:","")),s=this.sendType=="word-chain"?"dialogDroupWordChain":"dialogGroupVote";this.windowPortrait?this.$store.dispatch("openDialog",t).then(()=>{this.$store.state[s]={type:"create",dialog_id:t}}):this.goForward({name:"manage-messenger",params:{open:this.sendType,dialog_id:t}})}}},$={};var ht=p(vt,_t,ft,!1,bt,null,null,null);function bt(t){for(let s in $)this[s]=$[s]}var ca=function(){return ht.exports}();export{ca as default};
